PICO-GPU.1
#----
@input var pos : Vec3;
@global var cameraViewProj : Mat4;
var outputPosition : Vec4;
function vertex() {
	outputPosition = vec4(pos,1) * cameraViewProj;
}
----
var outputColor : Vec4;
@input var normal : Vec3;
@input var uv  : Vec2;
@param var tex : Sampler2D;
@param var light : Vec3;
@param var alpha : Float;
function fragment() {
	var l = light.dot(-normal).max(0.2);
	outputColor = tex.get(uv);
	outputColor.rgb *= l;
	outputColor.a *= alpha;
}
----
@input var pos : Vec2;
@param var tex : Sampler2D;
@var var outputPosition : Vec4;
@global var time : Float;
var outputColor : Vec4;
var uv : Vec2;

function vertex() {
	outputPosition  = vec4(pos.xy,0,1);
	uv = (pos.xy + vec2(1)) * 0.5;
}
function fragment() {
	uv += vec2(cos(time + pos.x), sin(time + pos.y));
	outputColor = tex.get(uv);
}
----

----

#----
var m = mat4();
var quad = loadBuffer(1);
var buffer = loadBuffer(0);
var tex = loadTexture(2);
var target = loadTexture(3);

var m = mat4();
m.translate(0,0,4);

function update() {
	clear(vec4(0.1,0.1,0.12,1));

	// draw scaled down texture
	setShader(2);
	setParam("tex",tex);
	setTarget(target);
	cull(0);
	draw(quad);
	setTarget();

	// update camera
var r = vec3(
	keyDown(Key.LEFT) ? 1 : keyDown(Key.RIGHT) ? -1 : 0,
	keyDown(Key.UP) ? 1 : keyDown(Key.DOWN) ? -1 : 0
);
	r.scale(3);
	r.add(vec3(1));
	m.prependRotation(0.003+r.x,0.002+r.y,0.01+r.z);
	setCamera(m);

	// draw cube
	cull(-1);
	setShader(0,1);
	setParam("alpha",0.7);
	setParam("tex",target);
	setParam("light",vec3(0.5,0.2,3).normalized());
	draw(buffer);
}
#----
F:[-0.500000000,-0.500000000,-0.500000000,0.000000000,-1.000000000,0.000000000,1.000000000,1.000000000,0.500000000,-0.500000000,-0.500000000,0.000000000,-1.000000000,0.000000000,0.000000000,1.000000000,0.500000000,-0.500000000,0.500000000,0.000000000,-1.000000000,0.000000000,0.000000000,0.000000000,-0.500000000,-0.500000000,-0.500000000,0.000000000,-1.000000000,0.000000000,1.000000000,1.000000000,0.500000000,-0.500000000,0.500000000,0.000000000,-1.000000000,0.000000000,0.000000000,0.000000000,-0.500000000,-0.500000000,0.500000000,0.000000000,-1.000000000,0.000000000,1.000000000,0.000000000,0.500000000,-0.500000000,-0.500000000,1.000000000,0.000000000,0.000000000,1.000000000,1.000000000,0.500000000,0.500000000,-0.500000000,1.000000000,0.000000000,0.000000000,0.000000000,1.000000000,0.500000000,0.500000000,0.500000000,1.000000000,0.000000000,0.000000000,0.000000000,0.000000000,0.500000000,-0.500000000,-0.500000000,1.000000000,0.000000000,0.000000000,1.000000000,1.000000000,0.500000000,0.500000000,0.500000000,1.000000000,0.000000000,0.000000000,0.000000000,0.000000000,0.500000000,-0.500000000,0.500000000,1.000000000,0.000000000,0.000000000,1.000000000,0.000000000,-0.500000000,-0.500000000,0.500000000,0.000000000,0.000000000,1.000000000,1.000000000,1.000000000,0.500000000,-0.500000000,0.500000000,0.000000000,0.000000000,1.000000000,0.000000000,1.000000000,0.500000000,0.500000000,0.500000000,0.000000000,0.000000000,1.000000000,0.000000000,0.000000000,-0.500000000,-0.500000000,0.500000000,0.000000000,0.000000000,1.000000000,1.000000000,1.000000000,0.500000000,0.500000000,0.500000000,0.000000000,0.000000000,1.000000000,0.000000000,0.000000000,-0.500000000,0.500000000,0.500000000,0.000000000,0.000000000,1.000000000,1.000000000,0.000000000,-0.500000000,-0.500000000,-0.500000000,-1.000000000,0.000000000,0.000000000,0.000000000,1.000000000,-0.500000000,0.500000000,0.500000000,-1.000000000,0.000000000,0.000000000,1.000000000,0.000000000,-0.500000000,0.500000000,-0.500000000,-1.000000000,0.000000000,0.000000000,1.000000000,1.000000000,-0.500000000,-0.500000000,-0.500000000,-1.000000000,0.000000000,0.000000000,0.000000000,1.000000000,-0.500000000,-0.500000000,0.500000000,-1.000000000,0.000000000,0.000000000,0.000000000,0.000000000,-0.500000000,0.500000000,0.500000000,-1.000000000,0.000000000,0.000000000,1.000000000,0.000000000,-0.500000000,0.500000000,-0.500000000,0.000000000,1.000000000,0.000000000,0.000000000,1.000000000,0.500000000,0.500000000,0.500000000,0.000000000,1.000000000,0.000000000,1.000000000,0.000000000,0.500000000,0.500000000,-0.500000000,0.000000000,1.000000000,0.000000000,1.000000000,1.000000000,-0.500000000,0.500000000,-0.500000000,0.000000000,1.000000000,0.000000000,0.000000000,1.000000000,-0.500000000,0.500000000,0.500000000,0.000000000,1.000000000,0.000000000,0.000000000,0.000000000,0.500000000,0.500000000,0.500000000,0.000000000,1.000000000,0.000000000,1.000000000,0.000000000,-0.500000000,-0.500000000,-0.500000000,0.000000000,0.000000000,-1.000000000,0.000000000,1.000000000,0.500000000,0.500000000,-0.500000000,0.000000000,0.000000000,-1.000000000,1.000000000,0.000000000,0.500000000,-0.500000000,-0.500000000,0.000000000,0.000000000,-1.000000000,1.000000000,1.000000000,-0.500000000,-0.500000000,-0.500000000,0.000000000,0.000000000,-1.000000000,0.000000000,1.000000000,-0.500000000,0.500000000,-0.500000000,0.000000000,0.000000000,-1.000000000,0.000000000,0.000000000,0.500000000,0.500000000,-0.500000000,0.000000000,0.000000000,-1.000000000,1.000000000,0.000000000]
F:[-1.000000000,-1.000000000,1.000000000,-1.000000000,-1.000000000,1.000000000,1.000000000,-1.000000000,1.000000000,1.000000000,-1.000000000,1.000000000]
T:[DefaultTexture.png]
I:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]